(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ddb570b0"],{1943:function(e,t,c){},"25a9":function(e,t,c){"use strict";c.r(t);c("b0c0");var r=c("7a23"),a=Object(r["withScopeId"])("data-v-9dccb782");Object(r["pushScopeId"])("data-v-9dccb782");var o={class:"header_tools_container"},l=Object(r["createVNode"])("h1",null,"訂單列表",-1),d={class:"order_list"},n=Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null,[Object(r["createVNode"])("input",{type:"checkbox"})]),Object(r["createVNode"])("th",null,"訂單建立時間"),Object(r["createVNode"])("th",null,"訂單編號"),Object(r["createVNode"])("th",null,"付款狀態"),Object(r["createVNode"])("th",null,"總金額"),Object(r["createVNode"])("th",null,"買家姓名"),Object(r["createVNode"])("th",null,"編輯")])],-1),i=Object(r["createVNode"])("td",null,[Object(r["createVNode"])("input",{type:"checkbox"})],-1),s={key:0,class:"text-success"},b={key:1,class:"text-danger"},u=Object(r["createVNode"])("span",{class:"material-icons"},"mode_edit",-1),O=Object(r["createVNode"])("span",{class:"material-icons"},"close",-1),p={key:0,"aria-label":"Page navigation example",class:"mt-3"},j={class:"pagination justify-content-center custom_pagination"};Object(r["popScopeId"])();var m=a((function(e,t,c,a,m,f){var h=Object(r["resolveComponent"])("OrderModal"),N=Object(r["resolveComponent"])("OrderDelModal"),V=Object(r["resolveComponent"])("Bubble");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])("div",o,[l,Object(r["createVNode"])("a",{class:"del_all_orders",onClick:t[1]||(t[1]=Object(r["withModifiers"])((function(){return f.DelAllOrder&&f.DelAllOrder.apply(f,arguments)}),["prevent"])),href:"#"},"刪除所有訂單")]),Object(r["createVNode"])("table",d,[n,Object(r["createVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(m.list,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:e.id},[i,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(f.fix_time_format(e.create_at)),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.id),1),Object(r["createVNode"])("td",null,[e.is_paid?(Object(r["openBlock"])(),Object(r["createBlock"])("span",s,"已付款")):(Object(r["openBlock"])(),Object(r["createBlock"])("span",b,"未付款"))]),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.total),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.user.name),1),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{onClick:Object(r["withModifiers"])((function(t){return f.openModal(e)}),["prevent"]),href:"#",class:"edit"},[u],8,["onClick"]),Object(r["createVNode"])("a",{onClick:Object(r["withModifiers"])((function(t){return f.openDelModal(e)}),["prevent"]),href:"#",class:"remove"},[O],8,["onClick"])])])})),128))])]),m.pagination.total>1?(Object(r["openBlock"])(),Object(r["createBlock"])("nav",p,[Object(r["createVNode"])("ul",j,[Object(r["createVNode"])("li",{class:["page-item",{disabled:!m.pagination.has_pre}]},[Object(r["createVNode"])("a",{onClick:t[2]||(t[2]=Object(r["withModifiers"])((function(e){return f.getOrders(m.pagination.current_page-1)}),["prevent"])),class:"page-link",href:"#"},"Previous")],2),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(m.pagination.total_pages,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("li",{class:[{active:m.pagination.current_page==e},"page-item"],key:t},[Object(r["createVNode"])("a",{onClick:Object(r["withModifiers"])((function(e){return f.getOrders(t+1)}),["prevent"]),class:"page-link",href:"#"},Object(r["toDisplayString"])(t+1),9,["onClick"])],2)})),128)),Object(r["createVNode"])("li",{class:["page-item",{disabled:!m.pagination.has_next}]},[Object(r["createVNode"])("a",{onClick:t[3]||(t[3]=Object(r["withModifiers"])((function(e){return f.getOrders(m.pagination.current_page+1)}),["prevent"])),class:"page-link",href:"#"},"Next")],2)])])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(h,{onBubbleOpen:f.bubbleTrigger,onEmitUpdate:f.getOrders,ref:"orderModal",order:m.tempOrder},null,8,["onBubbleOpen","onEmitUpdate","order"]),Object(r["createVNode"])(N,{onBubbleOpen:f.bubbleTrigger,onEmitDelete:f.getOrders,ref:"orderDelModal",order:m.tempOrder,isall:m.isAll},null,8,["onBubbleOpen","onEmitDelete","order","isall"]),Object(r["createVNode"])(V,{ref:"bubble",bubbleText:m.bubbleText},null,8,["bubbleText"])],64)})),f=(c("99af"),Object(r["withScopeId"])("data-v-744c7707"));Object(r["pushScopeId"])("data-v-744c7707");var h={class:"header"},N=Object(r["createVNode"])("h2",null,"修改訂單",-1),V=Object(r["createVNode"])("span",{class:"material-icons"},"close",-1),v={class:"body"},g={class:"row"},k={class:"order_block col-6"},_=Object(r["createVNode"])("h3",null,"訂單資訊",-1),y={class:"order_item_group"},M=Object(r["createVNode"])("span",null,"訂單建立時間",-1),x={class:"order_item_group"},B=Object(r["createVNode"])("span",null,"訂單編號",-1),S={class:"order_block col-6"},$=Object(r["createVNode"])("h3",null,"付款資訊",-1),D={class:"order_item_group"},w=Object(r["createVNode"])("label",{for:"create_time"},"付款狀態",-1),C={class:"d-flex w-50"},L={key:0,class:"text-success mx-2"},T={key:1,class:"text-danger mx-2"},A=Object(r["createVNode"])("div",{class:"order_item_group"},[Object(r["createVNode"])("span",null,"運送方式"),Object(r["createVNode"])("span",null,"宅配到府")],-1),I={class:"row"},U={class:"order_block col-6"},F=Object(r["createVNode"])("h3",null,"訂單明細",-1),J={class:"order_product_list"},E=Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th"),Object(r["createVNode"])("th",null,"品名"),Object(r["createVNode"])("th",null,"單價"),Object(r["createVNode"])("th",null,"數量"),Object(r["createVNode"])("th",null,"小計")])],-1),P={class:"text-center"},Y={class:"product_price_total"},q={class:"order_block col-6"},z=Object(r["createVNode"])("h3",null,"顧客資訊",-1),G={class:"order_item_group"},H=Object(r["createVNode"])("label",{for:"create_time"},"姓名",-1),K={class:"order_item_group"},Q=Object(r["createVNode"])("label",{for:"create_time"},"E-mail",-1),R={class:"order_item_group"},W=Object(r["createVNode"])("label",{for:"create_time"},"電話",-1),X={class:"order_item_group"},Z=Object(r["createVNode"])("label",{for:"create_time"},"地址",-1),ee={class:"order_item_group"},te=Object(r["createVNode"])("label",{for:"create_time"},"備註",-1),ce={class:"footer"};Object(r["popScopeId"])();var re=f((function(e,t,c,a,o,l){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:["order_modal_container",{active:o.modalStatus}]},[Object(r["createVNode"])("div",{class:["order_modal",{active:o.modalStatus}]},[Object(r["createVNode"])("div",h,[N,Object(r["createVNode"])("a",{onClick:t[1]||(t[1]=Object(r["withModifiers"])((function(){return l.leaveModal&&l.leaveModal.apply(l,arguments)}),["prevent"])),href:"#",class:"leave"},[V])]),Object(r["createVNode"])("div",v,[Object(r["createVNode"])("div",null,[Object(r["createVNode"])("div",g,[Object(r["createVNode"])("div",k,[_,Object(r["createVNode"])("div",y,[M,Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(l.fix_time_format(o.tempOrder.create_at)),1)]),Object(r["createVNode"])("div",x,[B,Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(o.tempOrder.id),1)])]),Object(r["createVNode"])("div",S,[$,Object(r["createVNode"])("div",D,[w,Object(r["createVNode"])("div",C,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.tempOrder.is_paid=e}),type:"checkbox",class:"form-check-input"},null,512),[[r["vModelCheckbox"],o.tempOrder.is_paid]]),o.tempOrder.is_paid?(Object(r["openBlock"])(),Object(r["createBlock"])("span",L,"已付款")):(Object(r["openBlock"])(),Object(r["createBlock"])("span",T,"未付款"))])]),A])]),Object(r["createVNode"])("div",I,[Object(r["createVNode"])("div",U,[F,Object(r["createVNode"])("table",J,[E,Object(r["createVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(o.tempOrder.products,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:e.id},[Object(r["createVNode"])("td",P,[Object(r["createVNode"])("img",{class:"thumbnail",src:e.product.imageUrl,alt:"商品圖片"},null,8,["src"])]),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.product.title),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.product.price),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.qty)+" "+Object(r["toDisplayString"])(e.product.unit),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.final_total),1)])})),128))])]),Object(r["createVNode"])("div",Y,[Object(r["createVNode"])("span",null,"總金額 NT "+Object(r["toDisplayString"])(o.tempOrder.total),1)])]),Object(r["createVNode"])("div",q,[z,Object(r["createVNode"])("div",G,[H,Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.tempOrder.user.name=e}),class:"form-control",type:"text"},null,512),[[r["vModelText"],o.tempOrder.user.name]])]),Object(r["createVNode"])("div",K,[Q,Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.tempOrder.user.email=e}),class:"form-control",type:"text"},null,512),[[r["vModelText"],o.tempOrder.user.email]])]),Object(r["createVNode"])("div",R,[W,Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return o.tempOrder.user.tel=e}),class:"form-control",type:"tel"},null,512),[[r["vModelText"],o.tempOrder.user.tel]])]),Object(r["createVNode"])("div",X,[Z,Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=function(e){return o.tempOrder.user.address=e}),class:"form-control",type:"text"},null,512),[[r["vModelText"],o.tempOrder.user.address]])]),Object(r["createVNode"])("div",ee,[te,Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[7]||(t[7]=function(e){return o.tempOrder.user.message=e}),class:"form-control",type:"text"},null,512),[[r["vModelText"],o.tempOrder.user.message]])])])])])]),Object(r["createVNode"])("div",ce,[Object(r["createVNode"])("a",{onClick:t[8]||(t[8]=Object(r["withModifiers"])((function(){return l.updateOrder&&l.updateOrder.apply(l,arguments)}),["prevent"])),class:"update",href:"#"},"更新")])],2)],2)})),ae={props:{order:Object},emits:["emit-update","bubbleOpen"],data:function(){return{modalStatus:!1,tempOrder:{user:{name:"",email:"",address:"",tel:""}}}},methods:{updateOrder:function(){var e=this,t={data:e.tempOrder};e.$store.commit("startLoading",!0),e.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("seanlibra","/admin/order/").concat(e.tempOrder.id),t).then((function(t){t.data.success?(e.$emit("emit-update"),e.$emit("bubbleOpen",t.data.message),e.$store.commit("startLoading",!1),e.leaveModal()):(e.$emit("bubbleOpen",t.data.message),e.$store.commit("startLoading",!1))})).catch((function(){e.$emit("bubbleOpen","連線錯誤"),e.$store.commit("startLoading",!1)}))},openModal:function(){this.modalStatus=!0},leaveModal:function(){this.modalStatus=!1,this.tempOrder=JSON.parse(JSON.stringify(this.order))},fix_time_format:function(e){var t=new Date(1e3*e);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())}},computed:{timeStamp:function(){var e=new Date(this.tempOrder.date);return e.getMilliseconds()}},watch:{order:function(){this.tempOrder=JSON.parse(JSON.stringify(this.order))}}};c("afa8");ae.render=re,ae.__scopeId="data-v-744c7707";var oe=ae,le=Object(r["withScopeId"])("data-v-4cd610fd");Object(r["pushScopeId"])("data-v-4cd610fd");var de={class:"header"},ne=Object(r["createVNode"])("h2",null,"刪除訂單",-1),ie=Object(r["createVNode"])("span",{class:"material-icons"},"close",-1),se={class:"body"},be={key:0},ue=Object(r["createTextVNode"])(" 是否確定刪除 "),Oe=Object(r["createVNode"])("span",{class:"text-danger"},"所有訂單?",-1),pe={key:1},je=Object(r["createTextVNode"])(" 是否確定刪除訂單 "),me={class:"text-danger"},fe=Object(r["createTextVNode"])(" ? "),he={class:"footer"};Object(r["popScopeId"])();var Ne=le((function(e,t,c,a,o,l){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:["del_order_modal_container",{active:o.modalStatus}]},[Object(r["createVNode"])("div",{class:["del_order_modal",{active:o.modalStatus}]},[Object(r["createVNode"])("div",de,[ne,Object(r["createVNode"])("a",{href:"#",class:"leave",onClick:t[1]||(t[1]=Object(r["withModifiers"])((function(){return l.leaveModal&&l.leaveModal.apply(l,arguments)}),["prevent"]))},[ie])]),Object(r["createVNode"])("div",se,[c.isall?(Object(r["openBlock"])(),Object(r["createBlock"])("div",be,[ue,Oe])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",pe,[je,Object(r["createVNode"])("span",me,Object(r["toDisplayString"])(c.order.id),1),fe]))]),Object(r["createVNode"])("div",he,[c.isall?(Object(r["openBlock"])(),Object(r["createBlock"])("a",{key:0,onClick:t[2]||(t[2]=Object(r["withModifiers"])((function(){return l.delAllOrder&&l.delAllOrder.apply(l,arguments)}),["prevent"])),class:"comfirm",href:"#"},"刪除所有訂單")):(Object(r["openBlock"])(),Object(r["createBlock"])("a",{key:1,onClick:t[3]||(t[3]=Object(r["withModifiers"])((function(){return l.delOrder&&l.delOrder.apply(l,arguments)}),["prevent"])),class:"comfirm",href:"#"},"確定"))])],2)],2)})),Ve={props:{order:Object,isall:Boolean},emits:["bubbleOpen","emit-delete"],data:function(){return{modalStatus:!1,tempOrder:{}}},methods:{openModal:function(){this.modalStatus=!0},leaveModal:function(){this.modalStatus=!1},delOrder:function(){var e=this;e.$store.commit("startLoading",!0),e.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("seanlibra","/admin/order/").concat(e.tempOrder.id)).then((function(t){t.data.success?(e.$emit("bubbleOpen",t.data.message),e.$emit("emit-delete"),e.$store.commit("startLoading",!1),e.leaveModal()):(e.$emit("bubbleOpen",t.data.message),e.$store.commit("startLoading",!1))})).catch((function(){e.$emit("bubbleOpen","連線錯誤"),e.$store.commit("startLoading",!1)}))},delAllOrder:function(){var e=this;e.$store.commit("startLoading",!0),e.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("seanlibra","/admin/orders/all")).then((function(t){t.data.success?(e.$emit("bubbleOpen",t.data.message),e.$store.commit("startLoading",!1),e.$emit("emit-delete"),e.leaveModal()):(e.$emit("bubbleOpen",t.data.message),e.$store.commit("startLoading",!1))})).catch((function(){e.$emit("bubbleOpen","連線錯誤"),e.$store.commit("startLoading",!1)}))}},watch:{order:function(){this.tempOrder=this.order}}};c("41dc");Ve.render=Ne,Ve.__scopeId="data-v-4cd610fd";var ve=Ve,ge={data:function(){return{list:[],pagination:{},tempOrder:{user:{name:"",address:"",email:"",tel:""}},isAll:!1,bubbleText:""}},methods:{getOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.$store.commit("startLoading",!0),this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("seanlibra","/admin/orders?page=").concat(e)).then((function(e){e.data.success?(t.list=e.data.orders,t.pagination=e.data.pagination,t.$store.commit("startLoading",!1)):(t.bubbleText=e.data.message,t.$refs.bubble.bubbleACtive(),t.$store.commit("startLoading",!1))})).catch((function(){t.bubbleText="連線錯誤",t.$refs.bubble.bubbleACtive(),t.$store.commit("startLoading",!1)}))},fix_time_format:function(e){var t=new Date(1e3*e);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())},openModal:function(e){this.$refs.orderModal.openModal(),this.tempOrder=e},openDelModal:function(e){this.$refs.orderDelModal.openModal(),this.isAll=!1,this.tempOrder=e},DelAllOrder:function(){this.$refs.orderDelModal.openModal(),this.isAll=!0},bubbleTrigger:function(e){var t=this;t.bubbleText=e,t.$refs.bubble.bubbleACtive()}},created:function(){this.getOrders()},components:{OrderModal:oe,OrderDelModal:ve}};c("e000");ge.render=m,ge.__scopeId="data-v-9dccb782";t["default"]=ge},"41dc":function(e,t,c){"use strict";c("1943")},"46c7":function(e,t,c){},"7f5d":function(e,t,c){},afa8:function(e,t,c){"use strict";c("46c7")},e000:function(e,t,c){"use strict";c("7f5d")}}]);
//# sourceMappingURL=chunk-ddb570b0.fe39e627.js.map