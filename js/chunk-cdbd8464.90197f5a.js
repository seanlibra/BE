(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cdbd8464"],{2355:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o=Object(a["withScopeId"])("data-v-dd476c84");Object(a["pushScopeId"])("data-v-dd476c84");var n={class:"Cart"},r={class:"container wrapper"},l=Object(a["createStaticVNode"])('<ul class="time_line" data-v-dd476c84><li class="step active" data-v-dd476c84><span class="circle" data-v-dd476c84>1</span><span class="text" data-v-dd476c84>確認訂單</span></li><li class="step" data-v-dd476c84><span class="circle" data-v-dd476c84>2</span><span class="text" data-v-dd476c84>填寫資料</span></li><li class="step" data-v-dd476c84><span class="circle" data-v-dd476c84>3</span><span class="text" data-v-dd476c84>完成訂單</span></li></ul><h3 class="list_title" data-v-dd476c84>購物車清單</h3>',2),s={key:0,class:"cart_empty_block"},i=Object(a["createVNode"])("div",{class:"header"},null,-1),d={class:"body"},b=Object(a["createTextVNode"])(" 購物車目前是空的唷，歡迎到"),u=Object(a["createTextVNode"])("購物商城"),p=Object(a["createTextVNode"])("繼續選購。 "),j={key:1},O={class:"table_scroll_bar_container"},m={class:"cart_list_table"},f=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th"),Object(a["createVNode"])("th",null,"商品"),Object(a["createVNode"])("th",null,"尺寸"),Object(a["createVNode"])("th",null,"單價"),Object(a["createVNode"])("th",null,"數量"),Object(a["createVNode"])("th",null,"小計")])],-1),v={class:"product_delete_container"},g=Object(a["createVNode"])("span",{class:"material-icons"},"close",-1),h={class:"product_thumbnail"},N={class:"standard"},V={class:"product_qty"},k={class:"single_product_price_container"},C={class:"single_origin_price"},_={key:0,class:"coupon text-success"},y={key:0,class:"single_final_price"},$={class:"cart_total"},T={class:"coupon_container"},B={class:"total_num"},x=Object(a["createVNode"])("span",null,"總計：",-1),L={class:"price_container"},w={key:0,class:"final_total"},S={class:"go_checkout"},U=Object(a["createTextVNode"])("前往填寫資料");Object(a["popScopeId"])();var A=o((function(e,t,c,A,D,I){var q=Object(a["resolveComponent"])("Header"),M=Object(a["resolveComponent"])("router-link"),Q=Object(a["resolveComponent"])("Loading"),F=Object(a["resolveComponent"])("Footer"),H=Object(a["resolveComponent"])("Bubble");return Object(a["openBlock"])(),Object(a["createBlock"])("div",n,[Object(a["createVNode"])(q,{"update-Cart":D.cartUpdteTrigger,"text-dark":!0},null,8,["update-Cart"]),Object(a["createVNode"])("div",r,[l,0===D.list.length?(Object(a["openBlock"])(),Object(a["createBlock"])("div",s,[i,Object(a["createVNode"])("div",d,[b,Object(a["createVNode"])(M,{class:"shop_link",to:"/shop/all"},{default:o((function(){return[u]})),_:1}),p])])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",j,[Object(a["createVNode"])("div",O,[Object(a["createVNode"])("table",m,[f,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(D.list,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",v,[Object(a["createVNode"])("a",{onClick:Object(a["withModifiers"])((function(t){return I.deleteCartsItem(e)}),["prevent"]),href:"#"},[g],8,["onClick"])])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",h,[Object(a["createVNode"])("img",{src:e.product.imageUrl,alt:"商品圖片"},null,8,["src"]),Object(a["createVNode"])("h3",null,Object(a["toDisplayString"])(e.product.title),1)])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",N,Object(a["toDisplayString"])(e.standard),1)]),Object(a["createVNode"])("td",null,"NT$ "+Object(a["toDisplayString"])(e.product.price),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",V,[Object(a["createVNode"])("button",{onClick:function(t){return I.updateCartItemQty(e,e.qty-1)}}," - ",8,["onClick"]),Object(a["withDirectives"])(Object(a["createVNode"])("input",{onBlur:function(t){return I.updateCartItemQty(e,e.qty)},min:"1",max:"99",type:"number","onUpdate:modelValue":function(t){return e.qty=t}},null,40,["onBlur","onUpdate:modelValue"]),[[a["vModelText"],e.qty,void 0,{number:!0}]]),Object(a["createVNode"])("button",{onClick:function(t){return I.updateCartItemQty(e,e.qty+1)}}," + ",8,["onClick"])])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",k,[Object(a["createVNode"])("div",C,[Object(a["createVNode"])("span",{class:[{coupon_yes:e.coupon},"price"]}," NT$ "+Object(a["toDisplayString"])(e.total),3),e.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("span",_,Object(a["toDisplayString"])(100-e.coupon.percent)+"% off",1)):Object(a["createCommentVNode"])("",!0)]),e.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("div",y," NT$ "+Object(a["toDisplayString"])(Math.floor(e.final_total)),1)):Object(a["createCommentVNode"])("",!0)])])])})),128))])])]),Object(a["createVNode"])("div",$,[Object(a["createVNode"])("div",T,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:{coupon_active:2==D.coupon},"onUpdate:modelValue":t[1]||(t[1]=function(e){return D.couponCode=e})},null,2),[[a["vModelText"],D.couponCode,void 0,{trim:!0}]]),0==D.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("a",{key:0,class:"coupon_no",onClick:t[2]||(t[2]=Object(a["withModifiers"])((function(){return I.useCoupon&&I.useCoupon.apply(I,arguments)}),["prevent"])),href:"#"},"使用優惠券")):1==D.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("a",{key:1,class:"coupon_some",onClick:t[3]||(t[3]=Object(a["withModifiers"])((function(){return I.useCoupon&&I.useCoupon.apply(I,arguments)}),["prevent"])),href:"#"},"部分已套用優惠券")):(Object(a["openBlock"])(),Object(a["createBlock"])("a",{key:2,class:"coupon_yes",onClick:t[4]||(t[4]=Object(a["withModifiers"])((function(){return I.useCoupon&&I.useCoupon.apply(I,arguments)}),["prevent"])),href:"#"},"已套用優惠券"))]),Object(a["createVNode"])("div",B,[x,Object(a["createVNode"])("div",L,[Object(a["createVNode"])("span",{class:[{coupon_yes:D.cart_info.data.total!==D.cart_info.data.final_total},"total"]},"$NT "+Object(a["toDisplayString"])(D.cart_info.data.total),3),D.cart_info.data.total!==D.cart_info.data.final_total?(Object(a["openBlock"])(),Object(a["createBlock"])("span",w,"$NT "+Object(a["toDisplayString"])(Math.floor(D.cart_info.data.final_total)),1)):Object(a["createCommentVNode"])("",!0)])])]),Object(a["createVNode"])("div",S,[D.list.length>0?(Object(a["openBlock"])(),Object(a["createBlock"])(M,{key:0,to:"/checkout"},{default:o((function(){return[U]})),_:1})):Object(a["createCommentVNode"])("",!0)])]))]),I.loading?(Object(a["openBlock"])(),Object(a["createBlock"])(Q,{key:0})):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(F),Object(a["createVNode"])(H,{ref:"bubble",bubbleText:D.bubbleText},null,8,["bubbleText"])])})),D=c("2909"),I=(c("99af"),c("4651")),q=c("acd4"),M=c("3a5e"),Q={data:function(){return{path:"seanlibra",url:"https://vue3-course-api.hexschool.io",list:[],cart_info:{data:{total:0}},couponCode:"",coupon:0,cartUpdteTrigger:!1,bubbleText:""}},methods:{getCartList:function(){var e=this;e.$store.commit("startLoading",!0),e.$http.get("".concat(e.url,"/api/").concat(e.path,"/cart")).then((function(t){t.data.success?(e.list=t.data.data.carts,e.cart_info=t.data,e.$store.commit("startLoading",!1)):(e.bubbleText=t.data.message,e.$refs.bubble.bubbleACtive(),e.$store.commit("startLoading",!1))})).catch((function(){e.bubbleText="連線錯誤",e.$refs.bubble.bubbleACtive(),e.$store.commit("startLoading",!1)}))},deleteCartsItem:function(e){var t=this;t.$store.commit("startLoading",!0),t.$http.delete("".concat(t.url,"/api/").concat(t.path,"/cart/").concat(e.id)).then((function(e){e.data.success?(t.getCartList(),t.bubbleText=e.data.message,t.$refs.bubble.bubbleACtive(),t.cartUpdteTrigger=!t.cartUpdteTrigger,t.$store.commit("startLoading",!1)):(t.bubbleText=e.data.message,t.$refs.bubble.bubbleACtive(),t.$store.commit("startLoading",!1))})).catch((function(){t.bubbleText="連線錯誤",t.$refs.bubble.bubbleACtive(),t.$store.commit("startLoading",!1)}))},updateCartItemQty:function(e,t){var c=this;if(t<1)e.qty=1;else{c.$store.commit("startLoading",!0);var a={data:{product_id:e.id,qty:t}};c.$http.put("".concat(c.url,"/api/").concat(c.path,"/cart/").concat(e.id),a).then((function(e){e.data.success?(c.getCartList(),c.bubbleText=e.data.message,c.$refs.bubble.bubbleACtive(),c.cartUpdteTrigger=!c.cartUpdteTrigger,c.$store.commit("startLoading",!1)):(c.bubbleText=e.data.message,c.$refs.bubble.bubbleACtive(),c.$store.commit("startLoading",!1))})).catch((function(){c.bubbleText="連線錯誤",c.$refs.bubble.bubbleACtive(),c.$store.commit("startLoading",!1)}))}},useCoupon:function(){var e=this,t={data:{code:e.couponCode}};e.$store.commit("startLoading",!0),e.$http.post("".concat(e.url,"/api/").concat(e.path,"/coupon"),t).then((function(t){t.data.success?(e.getCartList(),e.bubbleText=t.data.message,e.$refs.bubble.bubbleACtive(),e.cartUpdteTrigger=!e.cartUpdteTrigger,e.coupon=!0,e.$store.commit("startLoading",!1)):(e.bubbleText=t.data.message,e.$refs.bubble.bubbleACtive(),e.$store.commit("startLoading",!1))})).catch((function(){e.bubbleText="連線錯誤",e.$refs.bubble.bubbleACtive(),e.$store.commit("startLoading",!1)}))}},components:{Header:I["a"],Footer:q["a"],Loading:M["a"]},computed:{loading:function(){return this.$store.state.isLoading}},watch:{list:function(){var e=Object(D["a"])(this.list),t=e.some((function(e){return e.coupon}));if(t){var c=e.every((function(e){return e.coupon}));this.coupon=c?2:1}else this.coupon=0}},created:function(){this.getCartList()}};c("788e");Q.render=A,Q.__scopeId="data-v-dd476c84";t["default"]=Q},"37e5":function(e,t,c){},"788e":function(e,t,c){"use strict";c("37e5")}}]);
//# sourceMappingURL=chunk-cdbd8464.90197f5a.js.map